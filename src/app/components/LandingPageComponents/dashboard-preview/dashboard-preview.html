<section class="dashboard-preview-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">
        Your command center for
        <span class="gradient-text">productivity</span>
      </h2>
      <p class="section-description">
        Get instant insights with our intuitive dashboard
      </p>
    </div>

    <!-- Stats Cards -->
    <div class="stats-grid">
      @for (stat of stats(); track stat.label; let i = $index) {
        <div class="stat-card" [attr.data-testid]="'card-stat-' + i">
          <div class="stat-header">
            <div class="stat-icon-wrapper" [ngClass]="'icon-' + stat.color">
              @if (stat.icon === 'check-circle') {
                <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                  <polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
              }
              @if (stat.icon === 'trending-up') {
                <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
                  <polyline points="17 6 23 6 23 12"/>
                </svg>
              }
              @if (stat.icon === 'users') {
                <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
              }
              @if (stat.icon === 'file-text') {
                <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                  <polyline points="14 2 14 8 20 8"/>
                  <line x1="16" y1="13" x2="8" y2="13"/>
                  <line x1="16" y1="17" x2="8" y2="17"/>
                  <polyline points="10 9 9 9 8 9"/>
                </svg>
              }
            </div>
            <span class="stat-trend">{{ stat.trend }}</span>
          </div>
          <p class="stat-label" [attr.data-testid]="'text-stat-label-' + i">{{ stat.label }}</p>
          <p class="stat-value" [attr.data-testid]="'text-stat-value-' + i">{{ stat.value }}</p>
        </div>
      }
    </div>

    <!-- Dashboard Image -->
    <div class="dashboard-image-container">
      <div class="image-glow"></div>
      <div class="image-card">
        <div class="image-wrapper">
          <img [src]="dashboardImage" alt="Dashboard Analytics Preview" data-testid="img-dashboard-preview" />
        </div>
      </div>
    </div>

    <!-- Progress Sections -->
    <div class="progress-grid">
      <div class="progress-section">
        <h4 class="progress-title">Task Progress</h4>
        @for (item of taskProgress(); track item.label) {
          <div class="progress-item">
            <div class="progress-header">
              <span class="progress-label">{{ item.label }}</span>
              <span class="progress-value">{{ item.value }}%</span>
            </div>
            <div class="progress-bar-bg">
              <div class="progress-bar" [style.width.%]="item.value"></div>
            </div>
          </div>
        }
      </div>

      <div class="progress-section">
        <h4 class="progress-title">Team Activity</h4>
        @for (item of teamActivity(); track item.label) {
          <div class="progress-item">
            <div class="progress-header">
              <span class="progress-label">{{ item.label }}</span>
              <span class="progress-value">{{ item.value }}%</span>
            </div>
            <div class="progress-bar-bg">
              <div class="progress-bar" [style.width.%]="item.value"></div>
            </div>
          </div>
        }
      </div>

      <div class="progress-section">
        <h4 class="progress-title">Completion Rate</h4>
        @for (item of completionRate(); track item.label) {
          <div class="progress-item">
            <div class="progress-header">
              <span class="progress-label">{{ item.label }}</span>
              <span class="progress-value">{{ item.value }}%</span>
            </div>
            <div class="progress-bar-bg">
              <div class="progress-bar" [style.width.%]="item.value"></div>
            </div>
          </div>
        }
      </div>
    </div>
  </div>
</section>