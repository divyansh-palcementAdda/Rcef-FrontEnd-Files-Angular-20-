<div class="task-progress">
  <app-gradient-card variant="info" padding="0" borderRadius="1.25rem">
    <div class="task-header">
      <div class="header-content">
        <h3 class="task-title">Task Progress</h3>
        <p class="task-subtitle">Monitor and manage task completion</p>
      </div>
      
      <div class="header-actions">
        <button class="create-task-btn">
          <i class="bi bi-plus-circle"></i>
          New Task
        </button>
      </div>
    </div>

    <!-- Task Stats -->
    <div class="task-stats">
      <div class="stat-card" *ngFor="let stat of getTaskStats() | keyvalue; let i = index">
        <div class="stat-icon" [class]="'icon-' + (i + 1)">
      <i class="bi" [class]="getStatIcon(asTaskStatKey(stat.key))"></i>
        </div>
        <div class="stat-info">
          <div class="stat-value">{{ stat.value }}</div>
      <div class="stat-label">{{ getStatLabel(asTaskStatKey(stat.key)) }}</div>
        </div>
      </div>
    </div>

    <!-- Filters -->
    <div class="task-filters">
      <div class="filter-group">
        <select [value]="statusFilter" (change)="onStatusFilterChange($event)" class="filter-select">
          <option value="all">All Status</option>
          <option value="pending">Pending</option>
          <option value="in-progress">In Progress</option>
          <option value="completed">Completed</option>
          <option value="delayed">Delayed</option>
        </select>
        
        <select [value]="priorityFilter" (change)="onPriorityFilterChange($event)" class="filter-select">
          <option value="all">All Priority</option>
          <option value="low">Low</option>
          <option value="medium">Medium</option>
          <option value="high">High</option>
          <option value="critical">Critical</option>
        </select>
        
        <select [value]="departmentFilter" (change)="onDepartmentFilterChange($event)" class="filter-select">
          <option value="all">All Departments</option>
          <option *ngFor="let dept of getDepartments()" [value]="dept">{{ dept }}</option>
        </select>
      </div>
    </div>

    <!-- Tasks List -->
    <div class="tasks-list">
      <div *ngFor="let task of filteredTasks" class="task-card" (click)="viewTaskDetails(task)">
        <div class="task-header">
          <div class="task-title-section">
            <h4 class="task-name">{{ task.title }}</h4>
            <p class="task-description">{{ task.description }}</p>
          </div>
          
          <div class="task-meta">
            <span class="priority-badge" [class]="getPriorityClass(task.priority)">
              <i class="bi" [class]="getPriorityIcon(task.priority)"></i>
              {{ task.priority | titlecase }}
            </span>
            <span class="status-badge" [class]="getStatusClass(task.status)">
              <i class="bi" [class]="getStatusIcon(task.status)"></i>
              {{ task.status | titlecase }}
            </span>
          </div>
        </div>

        <div class="task-details">
          <div class="detail-item">
            <i class="bi bi-person"></i>
            <span>{{ task.assignee }}</span>
          </div>
          <div class="detail-item">
            <i class="bi bi-building"></i>
            <span>{{ task.department }}</span>
          </div>
          <div class="detail-item">
            <i class="bi bi-clock"></i>
            <span [class]="isOverdue(task.dueDate) ? 'overdue' : ''">
              {{ getDaysUntilDue(task.dueDate) }} days
            </span>
          </div>
          <div class="detail-item">
            <i class="bi bi-hourglass"></i>
            <span>{{ task.actualHours || 0 }}/{{ task.estimatedHours }}h</span>
          </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-section">
          <div class="progress-header">
            <span class="progress-label">Progress</span>
            <span class="progress-value">{{ task.progress }}%</span>
          </div>
          <div class="progress-bar">
            <div 
              class="progress-fill" 
              [class]="getProgressColor(task.progress)"
              [style.width.%]="task.progress">
            </div>
          </div>
        </div>

        <!-- Tags -->
        <div class="task-tags">
          <span *ngFor="let tag of task.tags" class="tag">{{ tag }}</span>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
          <button 
            class="action-btn progress-btn" 
            *ngFor="let progress of [25, 50, 75, 100]"
            (click)="quickUpdateProgress(task, progress); $event.stopPropagation()">
            {{ progress }}%
          </button>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="filteredTasks.length === 0" class="empty-state">
      <i class="bi bi-clipboard-check"></i>
      <h4>No tasks found</h4>
      <p>Try adjusting your filters</p>
    </div>

    <!-- Load More -->
    <div class="tasks-footer" *ngIf="filteredTasks.length > 0">
      <button class="load-more-btn">
        <i class="bi bi-arrow-down"></i>
        Load More Tasks
      </button>
    </div>
  </app-gradient-card>
</div>